function EventEmitter(){self=this,self.events=[]}function findEvent(e){var t;return self.events.forEach(function(n){n.key===e&&(t=n)}),t}function removeEvents(e,t){var n=self.events;if("undefined"==typeof e)return n.splice(0,n.length);if("undefined"==typeof t)for(var f=n.length;f>-1;f--)n[f].key===e&&n.splice(f,1);var o=findEvent(e);if("undefined"!=typeof o)for(var f=o.length-1;f>-1;f--)o[f].func===t&&o.splice(f,1)}function addEvent(e,t,n){var f=findEvent(e);if("undefined"==typeof f)f={key:e,funcs:[],count:n},self.events.push(f);else for(var o=0;o<f.funcs.length;o++)if(f.funcs[o].func===t)return;f.funcs.push(t)}var self;module.exports=EventEmitter,EventEmitter.prototype.on=function(e,t){addEvent(e,t,0)},EventEmitter.prototype.once=function(e,t){addEvent(e,t,1)},EventEmitter.prototype.many=function(e,t,n){addEvent(e,t,n)},EventEmitter.prototype.emit=function(e,t){var n=findEvent(e);if("undefined"!=typeof n){var f;arguments.length>1&&(f=[].splice.call(arguments,0),f=f.splice(1));for(var o=0;o<n.funcs.length;o++){var r=n.funcs[o];r.apply(self,f)}n.count>0&&0===--n.count&&removeEvents(e)}},EventEmitter.prototype.off=function(e,t){removeEvents(e,t)},EventEmitter.prototype.offAll=function(){removeEvents()},EventEmitter.prototype.offKey=function(e){removeEvents(e)};
